const i="",l=[],u=[],d="",o=()=>new Response(d,{headers:{"Content-Type":"text/html"},status:503}),h=(t,n)=>{t==null||t.postMessage({event:n})};self.oninstall=t=>{self.skipWaiting(),t.waitUntil(caches.open(i).then(n=>n.addAll(l)))};self.onactivate=t=>{t.waitUntil(caches.keys().then(function(n){return Promise.all(n.map(function(e){if(e!==i)return caches.delete(e)}))}))};self.onfetch=t=>{const n=new URL(t.request.url),e=(n.pathname.endsWith("/")?n.pathname.slice(0,-1):n.pathname)||"/";if(l.includes(e)||u.includes(e)){const c=new Request(n.origin+e);t.respondWith(caches.open(i).then(s=>s.match(c).then(function(r){const f=fetch(c).then(a=>(s.put(c,a.clone()),a)).catch(o);return r||f})).catch(()=>fetch(c).then(s=>s).catch(o)))}else t.respondWith(fetch(t.request).catch(o))};self.onnotificationclick=t=>{t.waitUntil(self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(n){for(var e=0;e<n.length;e++){const c=n[e];if(c.url===t.notification.data.redirect_to&&"focus"in c)return c.focus().then(s=>h(s,t))}return self.clients.openWindow(t.notification.data.redirect_to).then(c=>h(c,t))}))};
